# =============================================================================
# Nexbot Configuration Example
# =============================================================================
# Скопируйте этот файл в config.toml и настройте под ваши нужды.
#
# Подробная документация: docs/CONFIGURATION.md
# =============================================================================

# -----------------------------------------------------------------------------
# Workspace Settings
# -----------------------------------------------------------------------------
# Директория workspace хранит bootstrap файлы, логи и другие данные агента.
[workspace]
# Путь к директории workspace (поддерживает ~ и переменные окружения)
path = "~/.nexbot"

# Максимальное количество символов для чтения из bootstrap файлов
bootstrap_max_chars = 20000

# -----------------------------------------------------------------------------
# Agent Settings
# -----------------------------------------------------------------------------
# Настройки поведения агента и параметров модели.
[agent]
# Модель по умолчанию для запросов к LLM
model = "glm-4.7-flash"

# Максимум токенов в ответе LLM
max_tokens = 8192

# Максимум итераций tool calling на запрос
max_iterations = 20

# Temperature для сэмплинга LLM (0.0 - 1.0)
temperature = 0.7

# Таймаут обработки запроса агента (включая tool calls)
timeout_seconds = 60

# -----------------------------------------------------------------------------
# LLM Provider Settings
# -----------------------------------------------------------------------------
# Основная конфигурация LLM провайдера.
[llm]
# LLM провайдер: "zai" или "openai"
provider = "zai"

# -----------------------------------------------------------------------------
# Z.ai Provider Settings
# -----------------------------------------------------------------------------
# Конфигурация LLM провайдера Z.ai.
[llm.zai]
# API ключ Z.ai (используйте переменные окружения для безопасности)
# Получите ключ на https://z.ai
api_key = "${ZAI_API_KEY:}"

# Base URL Z.ai API
base_url = "https://api.z.ai/api/coding/paas/v4"

# Таймаут HTTP запросов к Z.ai API
timeout_seconds = 60

# Модель Z.ai по умолчанию
model = "glm-4.7-flash"

# -----------------------------------------------------------------------------
# OpenAI Provider Settings (Optional)
# -----------------------------------------------------------------------------
# Раскомментируйте для использования OpenAI вместо Z.ai.
# [llm.openai]
# api_key = "${OPENAI_API_KEY:}"
# base_url = "https://api.openai.com/v1"
# model = "gpt-4"

# -----------------------------------------------------------------------------
# Telegram Channel Settings
# -----------------------------------------------------------------------------
# Конфигурация канала Telegram.
[channels.telegram]
# Включить канал Telegram
enabled = true

# Токен Telegram бота (получите у @BotFather)
token = "${TELEGRAM_BOT_TOKEN:}"

# Список разрешённых Telegram user ID (пусто = разрешить всем)
# Узнайте свой ID через @userinfobot
allowed_users = []

# Список разрешённых Telegram chat ID (пусто = разрешить всем)
allowed_chats = []

# -----------------------------------------------------------------------------
# File Tools Settings
# -----------------------------------------------------------------------------
# Конфигурация инструментов работы с файлами.
[tools.file]
# Включить операции с файлами (read_file, write_file, list_dir)
enabled = true

# Список директорий, где разрешены операции с файлами
# Пустой список = операции с файлами запрещены
whitelist_dirs = ["~/.nexbot", "~/projects", "~/Documents"]

# Список директорий только для чтения
read_only_dirs = ["/etc", "/usr", "/bin"]

# -----------------------------------------------------------------------------
# Shell Tools Settings
# -----------------------------------------------------------------------------
# Конфигурация инструментов работы с shell.
[tools.shell]
# Включить выполнение shell команд
enabled = true

# Список разрешённых shell команд (пусто = shell отключён)
# Добавляйте только безопасные команды
allowed_commands = ["ls", "cat", "grep", "find", "cd", "pwd", "echo", "date", "git"]

# Рабочая директория по умолчанию для shell команд
working_dir = "~/.nexbot"

# Таймаут выполнения shell команды
timeout_seconds = 30

# -----------------------------------------------------------------------------
# Cron Scheduler Settings
# -----------------------------------------------------------------------------
# Конфигурация планировщика задач (v0.2+).
[cron]
# Включить cron планировщик
enabled = false

# Часовой пояс для планирования задач
timezone = "UTC"

# Файл с определениями cron задач (относительный путь от workspace)
jobs_file = "jobs.json"

# -----------------------------------------------------------------------------
# Worker Pool Settings
# -----------------------------------------------------------------------------
# Конфигурация пула async задач (v0.2+).
[workers]
# Количество worker goroutines
pool_size = 5

# Ёмкость очереди для ожидающих задач
queue_size = 100

# -----------------------------------------------------------------------------
# Subagent Manager Settings
# -----------------------------------------------------------------------------
# Конфигурация управления subagents (v0.2+).
[subagent]
# Включить функциональность subagent
enabled = true

# Максимум одновременных subagents
max_concurrent = 10

# Таймаут по умолчанию для задач subagent
timeout_seconds = 300

# Префикс для session ID subagent
session_prefix = "subagent-"

# -----------------------------------------------------------------------------
# Logging Settings
# -----------------------------------------------------------------------------
# Конфигурация логирования.
[logging]
# Уровень логирования: "debug", "info", "warn", "error"
level = "info"

# Формат логов: "json" или "text"
format = "json"

# Вывод логов: "stdout", "stderr", или путь к файлу
# Для вывода в файл: output = "~/.nexbot/nexbot.log"
output = "stdout"

# -----------------------------------------------------------------------------
# Message Bus Settings
# -----------------------------------------------------------------------------
# Конфигурация системы очередей сообщений.
[message_bus]
# Ёмкость очереди для входящих/исходящих сообщений
capacity = 1000

# =============================================================================
# Примеры использования переменных окружения:
# =============================================================================
# export ZAI_API_KEY="zai-ваш-api-ключ"
# export TELEGRAM_BOT_TOKEN="1234567890:ABCdefGHIjklMNOpqrsTUVwxyz"
#
# Добавьте в ~/.bashrc или ~/.zshrc для постоянного использования:
# echo 'export ZAI_API_KEY="zai-ваш-api-ключ"' >> ~/.bashrc
# echo 'export TELEGRAM_BOT_TOKEN="1234567890:ABCdefGHIjklMNOpqrsTUVwxyz"' >> ~/.bashrc
# source ~/.bashrc
# =============================================================================
